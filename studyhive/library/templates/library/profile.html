{% extends 'library/layout.html' %}

{% block title %}{{ profile_user.username }}'s Profile - E-Library{% endblock %}

{% block content %}
<div class="container">
    <h2>{{ profile_user.username }}'s Profile</h2>

    {% if profile_user.profile.avatar %}
        <img src="{{ profile_user.profile.avatar.url }}" alt="{{ profile_user.username }}'s avatar" class="img-thumbnail" width="150">
    {% endif %}

    <p>{{ profile_user.profile.bio }}</p>

    {% if is_own_profile %}
        <a href="" class="btn btn-secondary">Edit Profile</a>
    {% endif %}

    <hr>

    <h3>Uploaded Resources</h3>
    {% if uploaded_resources %}
        <ul class="list-group">
            {% for resource in uploaded_resources %}
                <li class="list-group-item">
                    <a href="">{{ resource.title }}</a>
                    <span class="text-muted">({{ resource.upload_date|date:"M d, Y" }})</span>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No resources uploaded yet.</p>
    {% endif %}

    <hr>

    <h3>Activity History</h3>
    <ul class="nav nav-tabs" id="activityTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="downloads-tab" data-toggle="tab" href="#downloads" role="tab" aria-controls="downloads" aria-selected="true">Downloads</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="views-tab" data-toggle="tab" href="#views" role="tab" aria-controls="views" aria-selected="false">Views</a>
        </li>
    </ul>
    <div class="tab-content" id="activityTabContent">
        <div class="tab-pane fade show active" id="downloads" role="tabpanel" aria-labelledby="downloads-tab">
            {% if downloads %}
                <ul class="list-group mt-3">
                    {% for download in downloads %}
                        <li class="list-group-item">
                            <a href="">{{ download.resource.title }}</a>
                            <span class="text-muted">({{ download.download_date|date:"M d, Y H:i" }})</span>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="mt-3">No downloads yet.</p>
            {% endif %}
        </div>
        <div class="tab-pane fade" id="views" role="tabpanel" aria-labelledby="views-tab">
            {% if views %}
                <ul class="list-group mt-3">
                    {% for view in views %}
                        <li class="list-group-item">
                            <a href="">{{ view.resource.title }}</a>
                            <span class="text-muted">({{ view.view_date|date:"M d, Y H:i" }})</span>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="mt-3">No views yet.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
